<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Summary Chapter Test</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="stylesheet" href="css/summary-chapter.css">
  <link href="https://fonts.googleapis.com/css2?family=Caveat:wght@400;700&display=swap" rel="stylesheet">
  <style>
    body {
      background-color: #f3f4f6;
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    }
  </style>
</head>
<body class="min-h-screen p-4">
  <div class="container mx-auto">
    <a href="/" class="block">
      <h1 class="text-3xl font-bold text-center mb-8 hover:text-purple-600 transition-colors">Summary Chapter Test</h1>
    </a>
    
    <!-- Congratulatory View (shown first) -->
    <div id="congratsView" class="mt-8 max-w-2xl mx-auto">
      <div class="bg-white rounded-xl shadow-md p-6 text-center">
        <div class="trophy-icon mb-4">
          <!-- Trophy SVG icon -->
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="80" height="80" class="mx-auto" fill="#FFD700">
            <path d="M5 3h14c.6 0 1 .4 1 1v3c0 3.8-3.1 6.9-6.9 7H11c-3.8 0-7-3.1-7-7V4c0-.6.4-1 1-1zm13 1H6v3c0 2.8 2.2 5 5 5h2c2.8 0 5-2.2 5-5V4zM8 14h8c.6 0 1 .4 1 1s-.4 1-1 1h-8c-.6 0-1-.4-1-1s.4-1 1-1zm3 3h2c.6 0 1 .4 1 1v3c0 .6-.4 1-1 1h-2c-.6 0-1-.4-1-1v-3c0-.6.4-1 1-1z"/>
          </svg>
        </div>
        <h2 class="text-3xl font-bold text-purple-700 mb-4 congratulation-title">
          Congratulations, Adventure Champion! <span class="party-emoji">üéâ</span>
        </h2>
        <p class="text-lg text-purple-600 mb-6">
          You've completed all 10 chapters of your amazing journey!
        </p>
        <div class="congratulation-stars flex justify-center space-x-8 my-8">
          <!-- Stars will be added via JavaScript -->
        </div>
        <button id="viewSummaries" class="mt-4 px-6 py-3 bg-purple-600 text-white rounded-full hover:bg-purple-700 transition-colors opacity-0 text-lg">
          Let's Recap Your Adventure <span class="ml-1">‚Ä∫</span>
        </button>
      </div>
    </div>
    
    <!-- Summary View (hidden initially) -->
    <div id="summaryView" class="mt-8 max-w-4xl mx-auto hidden">
      <div class="flex">
        <!-- Vertical Chapter Tabs -->
        <div class="chapter-tabs mr-4 flex flex-col space-y-2">
          <!-- Tabs will be added via JavaScript -->
        </div>
        
        <!-- Main Content Area -->
        <div class="bg-white rounded-xl shadow-md p-6 flex-grow">
          <!-- Chapter Content -->
          <div id="summaryContent" class="prose max-w-none mb-6">
            <!-- Chapter Header with Icon -->
            <div class="chapter-header flex items-center mb-4">
              <div class="chapter-icon bg-purple-100 rounded-full p-3 mr-3">
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="24" height="24" fill="currentColor" class="text-purple-700">
                  <path d="M6.5 2h11a1 1 0 0 1 .8.4L21 6v15a1 1 0 0 1-1 1H4a1 1 0 0 1-1-1V6l2.7-3.6a1 1 0 0 1 .8-.4zM19 8H5v12h14V8zm-.5-2L17 4H7L5.5 6h13zM8 10h8v2H8v-2zm0 4h8v2H8v-2z"/>
                </svg>
              </div>
              <h3 class="text-2xl font-bold text-purple-700">Chapter <span class="chapter-number">1</span>: <span class="chapter-title">The Beginning</span></h3>
            </div>
            
            <!-- Chapter Summary -->
            <div class="chapter-summary mb-6">
              <p>
                <!-- Summary text will be displayed here -->
              </p>
            </div>
            
            <!-- Your Choices Section -->
            <div class="your-choices bg-blue-50 rounded-lg p-4 mb-6">
              <h4 class="text-lg font-semibold text-blue-700 mb-2">Your Choices</h4>
              <ul class="list-disc pl-5 text-blue-800">
                <!-- Choices will be added via JavaScript -->
              </ul>
            </div>
            
            <!-- Key Learnings Section -->
            <div class="key-learnings bg-green-50 rounded-lg p-4 mb-6">
              <h4 class="text-lg font-semibold text-green-700 mb-2">Key Learnings</h4>
              <ul class="list-disc pl-5 text-green-800">
                <!-- Learnings will be added via JavaScript -->
              </ul>
            </div>
            
            <!-- Chapter Type Indicator -->
            <div class="chapter-type-indicator flex items-center mb-6">
              <span class="chapter-type px-3 py-1 rounded-full text-sm font-medium bg-purple-100 text-purple-800">
                Story Chapter
              </span>
            </div>
            
            <!-- Learning Progress Button -->
            <div class="text-right">
              <button id="seeProgress" class="px-6 py-3 bg-purple-600 text-white rounded-full hover:bg-purple-700 transition-colors text-lg flex items-center ml-auto">
                See Your Learning Progress
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="20" height="20" fill="currentColor" class="ml-2">
                  <path d="M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41L9 16.17z"/>
                </svg>
              </button>
            </div>
          </div>
          
          <!-- Navigation Buttons -->
          <div class="flex justify-between items-center mt-8">
            <button id="prevSummary" class="px-4 py-2 rounded-md bg-purple-100 text-purple-700 hover:bg-purple-200 transition-colors disabled:opacity-50 disabled:cursor-not-allowed nav-button">
              ‚Üê Previous Chapter
            </button>
            <button id="nextSummary" class="px-4 py-2 rounded-md bg-purple-100 text-purple-700 hover:bg-purple-200 transition-colors disabled:opacity-50 disabled:cursor-not-allowed nav-button">
              Next Chapter ‚Üí
            </button>
          </div>
        </div>
      </div>
    </div>
  </div>

  <script src="js/summary-chapter.js"></script>
  <script>
    // Initialize the summary manager
    const summaryManager = new SummaryChapterManager();
    
    // Load the pre-generated JSON data
    fetch('data/sample-summaries.json')
      .then(response => response.json())
      .then(summaries => {
        console.log(`Loaded ${summaries.length} chapter summaries`);
        summaryManager.initialize(summaries);
      })
      .catch(error => {
        console.error('Error loading summaries:', error);
        // Display error message to user
        const container = document.querySelector('.container');
        const errorMessage = document.createElement('div');
        errorMessage.className = 'mt-8 max-w-2xl mx-auto bg-red-100 text-red-700 p-4 rounded-xl shadow-md';
        errorMessage.innerHTML = `
          <h2 class="text-xl font-semibold mb-2">Error Loading Summaries</h2>
          <p>${error.message}</p>
          <p class="mt-4">Please make sure you've generated the sample data by running:</p>
          <pre class="bg-gray-800 text-white p-3 rounded mt-2 overflow-x-auto">python tests/simulations/generate_chapter_summaries.py --save-json --output app/static/experimental/typewriter-summary/data/sample-summaries.json</pre>
        `;
        container.appendChild(errorMessage);
      });
  </script>
</body>
</html>
