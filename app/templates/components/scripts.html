<!-- Configuration script to pass server-side data to JavaScript modules -->
<script>
    // Global configuration object for JavaScript modules
    window.appConfig = {
        totalCategories: parseInt("{{ story_categories|length }}"),
        totalLessonTopics: parseInt("{{ lesson_topics|length }}")
    };
</script>

<!-- Global functions that need to be accessible from onclick handlers -->
<script>
    // These functions will be set by the main module
    window.goToLessonTopicScreen = function() {
        console.warn('goToLessonTopicScreen not yet loaded');
    };
    
    window.startAdventure = function() {
        console.warn('startAdventure not yet loaded');
    };
</script>

<!-- Carousel manager module (needs to be loaded before main.js) -->
<script type="module" src="{{ url_for('static', path='js/carousel-manager.js') }}"></script>

<!-- Main application module (ES6 module) -->
<script type="module" src="{{ url_for('static', path='js/main.js') }}"></script>

<!-- Expose navigation functions to global scope for template onclick handlers -->
<script type="module">
    import { goToLessonTopicScreen, startAdventure } from './static/js/uiManager.js';
    
    // Make functions available globally for onclick handlers
    window.goToLessonTopicScreen = goToLessonTopicScreen;
    window.startAdventure = startAdventure;
</script>
